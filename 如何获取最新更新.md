# 🔄 如何获取项目最新更新

## 📋 更新方式说明

### ❓ 两种情况

| 情况 | 操作方式 | 说明 |
|------|---------|------|
| **已经克隆过项目** | 📥 `git pull` 拉取更新 | ✅ **推荐**，保留本地配置 |
| **第一次使用** | 📦 `git clone` 克隆项目 | 全新下载 |

**重要：** Git **不会主动推送**更新到你的电脑，需要**手动拉取**！

---

## ✅ 情况一：已经有项目（拉取更新）

### Windows系统

#### 完整步骤

```bash
# 1. 进入项目目录
cd apple-store-monitor

# 2. 查看当前版本
git log --oneline -1

# 3. 拉取最新更新
git pull origin main

# 4. 查看更新内容
git log --oneline -5

# 5. 更新依赖（如果requirements.txt有变化）
py -3.11 -m pip install -r requirements.txt --upgrade

# 6. 运行程序
py -3.11 start.py
```

#### 快速更新（一键）

```bash
cd apple-store-monitor && git pull origin main && py -3.11 -m pip install -r requirements.txt --upgrade && py -3.11 start.py
```

---

### Mac/Linux系统

```bash
# 1. 进入项目目录
cd apple-store-monitor

# 2. 拉取最新更新
git pull origin main

# 3. 更新依赖
pip install -r requirements.txt --upgrade

# 4. 运行程序
python start.py
```

---

## 📦 情况二：第一次使用（克隆项目）

### Windows系统

```bash
# 1. 克隆项目
git clone https://github.com/ZoeRamirie/apple-store-monitor.git

# 2. 进入目录
cd apple-store-monitor

# 3. 安装依赖
py -3.11 -m pip install -r requirements.txt

# 4. 运行程序
py -3.11 start.py
```

### Mac/Linux系统

```bash
# 1. 克隆项目
git clone https://github.com/ZoeRamirie/apple-store-monitor.git

# 2. 进入目录
cd apple-store-monitor

# 3. 安装依赖
pip install -r requirements.txt

# 4. 运行程序
python start.py
```

---

## 🔍 检查是否有更新

### 方法1：查看远程更新

```bash
# 进入项目目录
cd apple-store-monitor

# 获取远程仓库信息（不下载）
git fetch origin

# 查看本地和远程的差异
git log HEAD..origin/main --oneline
```

**如果有输出：** 说明有新更新  
**如果无输出：** 说明已是最新版本

### 方法2：对比版本

```bash
# 查看本地版本
git describe --tags

# 查看远程最新标签
git ls-remote --tags origin
```

---

## ⚠️ 常见问题

### Q1: 拉取更新时提示冲突

**问题：**
```
error: Your local changes to the following files would be overwritten by merge:
    config.json
Please commit your changes or stash them before you merge.
```

**原因：** 本地有修改的文件与远程更新冲突

**解决方案：**

#### 方案1：保存本地修改（推荐）
```bash
# 1. 暂存本地修改
git stash

# 2. 拉取更新
git pull origin main

# 3. 恢复本地修改
git stash pop
```

#### 方案2：放弃本地修改
```bash
# ⚠️ 警告：会丢失本地修改
git reset --hard origin/main
```

#### 方案3：只保留config.json
```bash
# 1. 备份config.json
cp config.json config.json.backup

# 2. 重置到远程版本
git reset --hard origin/main

# 3. 恢复配置文件
mv config.json.backup config.json
```

---

### Q2: 如何知道有什么新功能？

**查看更新日志：**

```bash
# 方法1：查看CHANGELOG.md
cat CHANGELOG.md

# 方法2：查看提交历史
git log --oneline -10

# 方法3：查看某个版本的详细信息
git show v1.1.0
```

**或者直接访问GitHub：**
- https://github.com/ZoeRamirie/apple-store-monitor/blob/main/CHANGELOG.md
- https://github.com/ZoeRamirie/apple-store-monitor/releases

---

### Q3: 拉取更新后需要重新安装依赖吗？

**判断方法：**

```bash
# 查看requirements.txt是否有变化
git diff HEAD~1 requirements.txt
```

**如果有输出（说明有变化）：**
```bash
# 更新依赖
py -3.11 -m pip install -r requirements.txt --upgrade
```

**如果无输出（说明无变化）：**
不需要重新安装依赖，直接运行程序即可。

---

### Q4: 我修改了代码，还能拉取更新吗？

**可以，但需要先处理：**

#### 如果想保留修改：
```bash
# 1. 提交本地修改
git add .
git commit -m "我的修改说明"

# 2. 拉取更新并合并
git pull origin main
```

#### 如果想放弃修改：
```bash
# 恢复到最新远程版本
git fetch origin
git reset --hard origin/main
```

---

### Q5: 更新后程序运行出错怎么办？

**回退到之前的版本：**

```bash
# 1. 查看所有版本标签
git tag -l

# 2. 回退到v1.0.0（举例）
git checkout v1.0.0

# 3. 如果确认要永久回退
git reset --hard v1.0.0
```

**或者查看提交历史回退：**

```bash
# 1. 查看提交历史
git log --oneline -10

# 2. 回退到某个提交（复制哈希值）
git reset --hard 93c9630
```

---

## 📊 更新流程图

```
当前状态：已有项目
    ↓
检查是否有更新
    ├── 有更新
    │   ↓
    │   备份重要文件（如config.json）
    │   ↓
    │   git pull origin main
    │   ↓
    │   检查是否有冲突
    │   ├── 有冲突 → 处理冲突
    │   └── 无冲突 → 继续
    │   ↓
    │   更新依赖（如需要）
    │   ↓
    │   运行程序
    │
    └── 无更新 → 直接运行程序
```

---

## 🔔 获取更新通知

### 方法1：Watch GitHub仓库

1. 访问：https://github.com/ZoeRamirie/apple-store-monitor
2. 点击右上角 **"Watch"** → **"Custom"**
3. 勾选 **"Releases"**（发布通知）
4. 点击 **"Apply"**

### 方法2：Star仓库

1. 点击右上角 **"Star"** ⭐
2. 定期查看GitHub动态

### 方法3：定期手动检查

```bash
# 每次运行前检查更新
cd apple-store-monitor
git fetch origin
git log HEAD..origin/main --oneline
```

---

## 📝 完整更新示例

### 场景：朋友已经克隆了项目，现在要更新到v1.1.0

**Windows PowerShell：**

```powershell
# 1. 进入项目目录
cd C:\Users\Administrator\apple-store-monitor

# 2. 备份配置文件
cp config.json config.json.backup

# 3. 查看当前版本
git log --oneline -1
# 输出：93c9630 🚀 中国大陆区配置优化完成

# 4. 拉取最新更新
git pull origin main
# 输出：
# Updating 93c9630..06841d2
# Fast-forward
# 42 files changed, 2548 insertions(+), 15 deletions(-)
# ...

# 5. 查看更新后的版本
git log --oneline -1
# 输出：06841d2 🚀 Release v1.1.0: Windows支持优化与依赖管理改进

# 6. 恢复配置文件
cp config.json.backup config.json

# 7. 更新依赖
py -3.11 -m pip install -r requirements.txt --upgrade

# 8. 运行程序
py -3.11 start.py
# 应该显示：🍎 Apple Store 库存监控系统 v1.1.0 🍎
```

---

## 🎯 最佳实践

### 更新前
1. ✅ 备份config.json配置文件
2. ✅ 查看CHANGELOG.md了解更新内容
3. ✅ 确认当前程序已停止运行

### 更新中
1. ✅ 使用 `git pull origin main` 拉取更新
2. ✅ 如有冲突，优先保留本地配置
3. ✅ 检查requirements.txt是否有变化

### 更新后
1. ✅ 恢复config.json配置
2. ✅ 更新Python依赖包（如需要）
3. ✅ 测试程序是否正常运行
4. ✅ 查看新功能和优化

---

## 📋 快速命令参考

### 检查更新
```bash
git fetch origin
git log HEAD..origin/main --oneline
```

### 拉取更新
```bash
git pull origin main
```

### 查看更新内容
```bash
git log --oneline -5
cat CHANGELOG.md
```

### 更新依赖
```bash
# Windows
py -3.11 -m pip install -r requirements.txt --upgrade

# Mac/Linux
pip install -r requirements.txt --upgrade
```

### 回退版本
```bash
git reset --hard v1.0.0
```

---

## 🆘 需要帮助？

### 文档资源
- 📖 [CHANGELOG.md](CHANGELOG.md) - 查看更新日志
- 📋 [README.md](README.md) - 项目说明
- 🪟 [Windows部署指南.md](Windows部署指南.md) - Windows使用

### GitHub资源
- 仓库主页：https://github.com/ZoeRamirie/apple-store-monitor
- 问题反馈：https://github.com/ZoeRamirie/apple-store-monitor/issues
- 发布页面：https://github.com/ZoeRamirie/apple-store-monitor/releases

---

## 🔑 关键要点

1. 📥 **Git不会自动推送更新** - 需要手动运行 `git pull`
2. 💾 **更新前备份配置** - 特别是config.json
3. 📦 **依赖可能需要更新** - 检查requirements.txt变化
4. 🔄 **定期检查更新** - 获取新功能和Bug修复
5. ⏮️ **可以回退版本** - 使用git标签或提交哈希

---

**记住：已经克隆的项目，只需要 `git pull` 就能获取最新更新！** 🚀

**版权所有：骑着大鹅追大奔**

