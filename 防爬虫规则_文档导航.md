# 🗺️ Apple API 防爬虫规则 - 文档导航

> **创建时间：** 2025-10-06  
> **目的：** 快速找到所需文档和工具

---

## 📚 文档速览

### 🚨 紧急情况（立即查看）

如果您的程序频繁出现HTTP 541错误，请立即查看：

1. **配置修复指南.md** - 修复配置问题
2. **config_safe.json** - 安全配置模板
3. **rate_calculator.py** - 验证配置工具

**快速修复：**
```bash
cp config_safe.json config.json
python3 main.py
```

---

## 📖 完整文档列表

### 1. 核心规则文档 ⭐⭐⭐⭐⭐

#### 📘 Apple_API_防爬虫规则总结.md
**内容：** 最详细的API限制规则分析
- 频率限制详解
- 时间窗口机制
- 行为特征检测
- 不同场景的配置策略
- 代码保护措施
- 快速计算工具

**适合：** 深入了解规则、设计新功能

**查看：**
```bash
less Apple_API_防爬虫规则总结.md
# 或
cat Apple_API_防爬虫规则总结.md | less
```

---

#### 📗 API限制快速参考卡.md
**内容：** 一页纸速查表
- 核心数字（10次/分钟）
- 推荐间隔
- 绝对禁止事项
- 快速计算公式
- 安全配置模板
- 问题排查

**适合：** 开发时快速查阅，放在手边

**查看：**
```bash
cat API限制快速参考卡.md
```

---

### 2. 实用指南 ⭐⭐⭐⭐⭐

#### 📕 配置修复指南.md
**内容：** 修复当前配置问题
- 当前配置分析（26.67次/分钟）
- 3种修复方案
- 1分钟快速修复步骤
- 配置计算公式
- 推荐配置对照表
- 常见错误配置

**适合：** 立即修复配置问题

**查看：**
```bash
less 配置修复指南.md
```

---

#### 📙 代码改进建议.md
**内容：** 后续开发的代码优化建议
- 6个必须实现的改进
- 详细代码示例
- 实现优先级
- 测试建议
- 预期效果

**适合：** 计划代码改进、实现新功能

**查看：**
```bash
less 代码改进建议.md
```

---

### 3. 综合报告 ⭐⭐⭐⭐⭐

#### 📔 项目完整分析报告_2025-10-06.md
**内容：** 项目的全面技术分析
- 执行摘要
- API限制规则总结
- 项目代码分析
- 配置问题详解
- 解决方案
- 后续开发指南

**适合：** 了解项目全貌、技术决策

**查看：**
```bash
less 项目完整分析报告_2025-10-06.md
```

---

### 4. 原始数据 ⭐⭐⭐⭐

#### 📓 API限制规律深度分析报告.md
**内容：** 基于301次实测的原始数据报告
- 实测数据摘要
- 频率限制阈值
- 时间窗口机制
- 抢购场景优化策略
- 最佳实践配置

**适合：** 了解数据来源、验证规则

**查看：**
```bash
less API限制规律深度分析报告.md
```

---

## 🛠️ 工具使用

### 1. rate_calculator.py - 频率计算工具

**功能：**
- 分析配置文件安全性
- 计算请求频率
- 提供修复建议
- 显示推荐配置

**使用方法：**

```bash
# 分析当前配置
python3 rate_calculator.py
# 选择 1

# 交互式计算
python3 rate_calculator.py
# 选择 2

# 查看推荐配置
python3 rate_calculator.py
# 选择 3
```

**示例输出：**
```
请求频率：26.67次/分钟
风险级别：💀 危险
安全标准：≤ 10次/分钟

建议修改：
  方案1：增加check_interval到 40秒
  方案2：减少门店数到 3个
```

---

### 2. config_safe.json - 安全配置模板

**内容：**
- 已优化的安全配置
- 频率：8.57次/分钟 ✅
- 监控5个上海门店
- check_interval: 30秒

**使用方法：**

```bash
# 备份当前配置
cp config.json config.json.backup

# 使用安全配置
cp config_safe.json config.json

# 验证配置
python3 rate_calculator.py

# 重启程序
python3 main.py
```

---

## 🎯 按场景查找

### 场景1：程序出现HTTP 541错误

**查看顺序：**
1. 📗 **API限制快速参考卡.md** - 了解基本规则
2. 📕 **配置修复指南.md** - 修复配置
3. 🛠️ **rate_calculator.py** - 验证修复

**快速操作：**
```bash
# 1. 停止程序
Ctrl+C

# 2. 修复配置
cp config_safe.json config.json

# 3. 等待60秒
sleep 60

# 4. 重启程序
python3 main.py
```

---

### 场景2：计划修改配置

**查看顺序：**
1. 📗 **API限制快速参考卡.md** - 查看推荐间隔
2. 🛠️ **rate_calculator.py** - 计算新配置
3. 📕 **配置修复指南.md** - 参考配置示例

**操作流程：**
```bash
# 1. 计算新配置
python3 rate_calculator.py
# 选择 2 (交互式计算)

# 2. 修改config.json
nano config.json

# 3. 验证修改
python3 rate_calculator.py
# 选择 1 (分析配置文件)

# 4. 测试运行
python3 main.py
```

---

### 场景3：开发新功能

**查看顺序：**
1. 📘 **Apple_API_防爬虫规则总结.md** - 了解详细规则
2. 📙 **代码改进建议.md** - 参考实现方案
3. 📗 **API限制快速参考卡.md** - 随时查阅

**开发流程：**
```
设计 → 评估影响 → 使用rate_calculator验证 → 实现 → 测试
```

---

### 场景4：第一次使用

**查看顺序：**
1. 📕 **配置修复指南.md** - 了解配置问题
2. 📗 **API限制快速参考卡.md** - 记住核心规则
3. 🛠️ **rate_calculator.py** - 验证配置
4. 📔 **项目完整分析报告** - 深入了解

**快速开始：**
```bash
# 1. 使用安全配置
cp config_safe.json config.json

# 2. 验证配置
python3 rate_calculator.py

# 3. 运行程序
python3 main.py
```

---

### 场景5：遇到问题不知道怎么办

**查看顺序：**
1. 📗 **API限制快速参考卡.md** - 问题排查章节
2. 📕 **配置修复指南.md** - 修复检查清单
3. 📔 **项目完整分析报告** - 综合分析

**排查步骤：**
```bash
# 1. 查看日志
tail -f monitor.log

# 2. 查找HTTP 541
grep "HTTP 541" monitor.log

# 3. 计算频率
python3 rate_calculator.py

# 4. 使用安全配置
cp config_safe.json config.json
```

---

## 📊 文档对比

| 文档 | 长度 | 详细度 | 适用场景 |
|------|------|--------|----------|
| 快速参考卡 | 1页 | ⭐ | 日常开发速查 |
| 配置修复指南 | 中等 | ⭐⭐⭐ | 修复配置问题 |
| 代码改进建议 | 详细 | ⭐⭐⭐⭐ | 开发新功能 |
| 防爬虫规则总结 | 非常详细 | ⭐⭐⭐⭐⭐ | 深入了解规则 |
| 完整分析报告 | 最详细 | ⭐⭐⭐⭐⭐ | 全面技术分析 |

---

## 🔥 最常用的3个资源

### 1. API限制快速参考卡.md
**为什么：** 最常用的速查表，开发时必备

```bash
# 打印出来贴在显示器旁边
cat API限制快速参考卡.md
```

### 2. rate_calculator.py
**为什么：** 修改配置前必须使用

```bash
# 每次修改配置前运行
python3 rate_calculator.py
```

### 3. config_safe.json
**为什么：** 出问题时的救命稻草

```bash
# 出问题时立即使用
cp config_safe.json config.json
```

---

## 📱 移动端查看

如果需要在手机上查看文档：

```bash
# 方法1：转换为PDF
pandoc Apple_API_防爬虫规则总结.md -o 规则总结.pdf

# 方法2：启动简单HTTP服务器
cd /Users/kellychen/CodeBuddy/applepick
python3 -m http.server 8000
# 然后在手机浏览器访问：http://你的IP:8000
```

---

## 🖨️ 打印建议

**推荐打印：**
1. 📗 API限制快速参考卡.md - 贴在显示器旁边
2. 📕 配置修复指南.md - 备用参考

**打印命令：**
```bash
# macOS
cat API限制快速参考卡.md | lp

# 或转换为PDF
pandoc API限制快速参考卡.md -o 快速参考卡.pdf
```

---

## 💡 使用建议

### 日常开发

```
开发时放在手边：📗 API限制快速参考卡.md
修改配置前运行：🛠️ rate_calculator.py
```

### 深入学习

```
第一次阅读：📔 项目完整分析报告
理解规则：📘 Apple_API_防爬虫规则总结
实现改进：📙 代码改进建议
```

### 紧急情况

```
出现HTTP 541：
1. 停止程序
2. cp config_safe.json config.json
3. 查看 📕 配置修复指南.md
4. 等待60秒
5. 重启程序
```

---

## 🔄 文档更新

当项目有新发现或改进时，需要更新的文档：

- **API规则变化** → 更新 Apple_API_防爬虫规则总结.md
- **新配置方案** → 更新 配置修复指南.md
- **新代码改进** → 更新 代码改进建议.md
- **实测数据** → 创建新的分析报告

---

## 📞 快速命令参考

```bash
# === 查看文档 ===
# 快速参考卡
cat API限制快速参考卡.md

# 配置修复指南
less 配置修复指南.md

# 完整分析报告
less 项目完整分析报告_2025-10-06.md

# === 使用工具 ===
# 计算频率
python3 rate_calculator.py

# 使用安全配置
cp config_safe.json config.json

# 验证配置
python3 rate_calculator.py

# === 监控运行 ===
# 查看日志
tail -f monitor.log

# 查找错误
grep "HTTP 541" monitor.log

# === 调试 ===
# 测试10分钟
timeout 600 python3 main.py

# 检查日志
grep -c "HTTP 541" monitor.log  # 应该是0
```

---

## 🎓 学习路径

### 初学者路径

```
1. 📕 配置修复指南.md (30分钟)
   └─ 了解配置问题和解决方案

2. 📗 API限制快速参考卡.md (15分钟)
   └─ 记住核心规则

3. 🛠️ rate_calculator.py (10分钟)
   └─ 学会使用工具

4. 实践：修复配置并运行 (20分钟)
```

**总时间：** 约1.5小时

### 进阶路径

```
1. 📘 Apple_API_防爬虫规则总结.md (1小时)
   └─ 深入理解所有规则

2. 📙 代码改进建议.md (30分钟)
   └─ 学习代码改进方案

3. 📔 项目完整分析报告 (45分钟)
   └─ 全面了解项目

4. 实践：实现代码改进 (2-3小时)
```

**总时间：** 约4-5小时

---

## ✅ 快速检查清单

使用前检查：

- [ ] 已阅读快速参考卡
- [ ] 已使用rate_calculator验证配置
- [ ] 配置频率≤10次/分钟
- [ ] 已备份当前配置
- [ ] 了解如何处理HTTP 541错误

---

## 📬 文档反馈

如果发现文档有误或需要补充：

1. 记录问题或建议
2. 查看相关的原始数据
3. 更新对应文档
4. 更新文档版本号

---

**导航创建时间：** 2025-10-06  
**文档数量：** 5个核心文档 + 2个工具  
**覆盖范围：** API限制规则、配置修复、代码改进、项目分析

**⭐ 建议收藏本文档作为快速入口！**


