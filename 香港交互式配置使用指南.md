# 🇭🇰 香港区域交互式配置使用指南

> **版本：** v1.0  
> **更新时间：** 2025-10-06  
> **适用区域：** 中国香港

---

## 📋 功能概述

香港区域现已支持**交互式配置生成器**，可以像大陆区域一样，根据您的需求深度定制监控配置！

### ✨ 核心功能

1. **多种预设策略**
   - 保守策略（推荐新手）
   - 平衡策略（推荐）
   - 积极策略
   - 全店全品（高风险）
   - 自定义配置

2. **智能产品选择**
   - 按优先级分组显示
   - 高优先级：256GB 热门配置
   - 中优先级：512GB/1TB 配置
   - 低优先级：2TB 配置

3. **灵活门店选择**
   - 核心门店（推荐）：銅鑼灣、ifc、廣東道
   - 其他门店：Festival Walk、太古、沙田
   - 支持单选、多选、全选

4. **自动风险评估**
   - 实时计算请求频率
   - 自动评估风险等级
   - 给出安全建议

---

## 🚀 快速开始

### 方法1: 通过统一入口（推荐）

```bash
python3 start.py
```

**操作步骤：**

1. 选择区域：`2` (🇭🇰 中国香港)
2. 选择配置：`1` (交互式配置 ⭐)
3. 按提示完成配置

### 方法2: 直接启动交互式配置

```bash
python3 interactive_config_hk.py
```

---

## 📊 预设策略详解

### 1. 保守策略（推荐新手）✅

**特点：**
- 监控范围：1-2店 + 1-2品
- 随机间隔：3-6秒
- 请求频率：约8次/分钟
- 风险等级：✅ 极低

**适合场景：**
- 首次使用
- 对API限制不熟悉
- 只想监控特定门店的特定型号

**示例配置：**
```
产品: iPhone 17 Pro Max 深墨蓝色 256GB
门店: Apple Causeway Bay (銅鑼灣)
结果: 安全可靠，不会触发限制
```

---

### 2. 平衡策略（推荐）✅✅

**特点：**
- 监控范围：2-3店 + 2-3品
- 随机间隔：3-6秒
- 请求频率：约10次/分钟
- 风险等级：✅ 低

**适合场景：**
- 想监控多个热门配置
- 需要覆盖主要门店
- 平衡监控效果和安全性

**示例配置：**
```
产品: 
  • iPhone 17 Pro Max 深墨蓝色 256GB
  • iPhone 17 Pro Max 宇宙橙色 256GB
  • iPhone 17 Pro Max 银色 256GB

门店:
  • Apple Causeway Bay (銅鑼灣) ⭐
  • Apple ifc mall (國際金融中心) ⭐
  • Apple Canton Road (廣東道) ⭐

结果: 4-9个组合，安全高效
```

---

### 3. 积极策略 ⚠️

**特点：**
- 监控范围：3-4店 + 3-4品
- 随机间隔：3-6秒
- 请求频率：约15次/分钟
- 风险等级：⚠️ 中

**适合场景：**
- 对多个型号都感兴趣
- 愿意承担一定风险
- 了解防爬虫规则

**注意事项：**
- ⚠️ 请求频率较高，可能触发限制
- 💡 建议：间隔稍长（30-45秒）
- 🔄 如触发541，立即停止并增加间隔

---

### 4. 全店全品（高风险）❌

**特点：**
- 监控范围：6店 + 6-12品
- 随机间隔：3-6秒
- 请求频率：约25次/分钟
- 风险等级：❌ 高（可能被限制）

**适合场景：**
- 需要全面覆盖
- 可以接受被限制的风险
- 有应对方案（换IP、增加间隔等）

**强烈建议：**
- ⚠️ 仅在必要时使用
- 🛡️ 检查间隔至少60秒
- 📊 密切监控HTTP状态
- 🔄 遇到541立即停止

---

### 5. 自定义配置 🎨

**特点：**
- 完全自主配置
- 灵活选择产品和门店
- 系统会给出风险评估

**操作流程：**
1. 选择策略 → `5` (自定义)
2. 自由选择产品
3. 自由选择门店
4. 系统计算频率并评估风险
5. 确认配置

---

## 🏪 香港门店说明

### 核心门店（推荐优先监控）⭐

| 门店编号 | 中文名称 | 英文名称 | 区域 |
|---------|---------|---------|------|
| R409 | 銅鑼灣 | Apple Causeway Bay | 香港島 |
| R428 | 國際金融中心 | Apple ifc mall | 香港島 |
| R485 | 廣東道 | Apple Canton Road | 九龍 |

**推荐理由：**
- 📍 地理位置优越
- 🔥 客流量大，补货频繁
- ✅ API响应稳定

---

### 其他门店

| 门店编号 | 中文名称 | 英文名称 | 区域 |
|---------|---------|---------|------|
| R499 | 又一城 | Apple Festival Walk | 九龍 |
| R610 | 太古廣場 | Apple Pacific Place | 香港島 |
| R673 | 新城市廣場 | Apple Shatin | 新界 |

**特点：**
- 覆盖新界地区
- 适合特定区域用户
- 补货频率稍低

---

## 📱 产品选择指南

### 高优先级（256GB）⭐⭐⭐

**最热门配置，优先监控：**

| Part Number | 颜色 | 容量 | 推荐度 |
|------------|------|------|--------|
| MFYP4ZA/A | 深墨蓝色 | 256GB | ⭐⭐⭐ |
| MFYN4ZA/A | 宇宙橙色 | 256GB | ⭐⭐⭐ |
| MFYM4ZA/A | 银色 | 256GB | ⭐⭐⭐ |

**特点：**
- 💰 性价比高
- 🔥 最抢手
- 📦 库存紧张

---

### 中优先级（512GB/1TB）⭐⭐

**平衡选择：**

| Part Number | 颜色 | 容量 |
|------------|------|------|
| MFYQ4ZA/A | 银色 | 512GB |
| MFYT4ZA/A | 宇宙橙色 | 512GB |
| MFYU4ZA/A | 深墨蓝色 | 512GB |
| MFYX4ZA/A | 深墨蓝色 | 1TB |
| MFYW4ZA/A | 宇宙橙色 | 1TB |
| MFYV4ZA/A | 银色 | 1TB |

**特点：**
- 📊 性价比不错
- 🎯 竞争适中
- 📦 补货相对稳定

---

### 低优先级（2TB）⭐

**小众配置：**

| Part Number | 颜色 | 容量 |
|------------|------|------|
| MFYY4ZA/A | 银色 | 2TB |
| MG004ZA/A | 宇宙橙色 | 2TB |
| MG014ZA/A | 深墨蓝色 | 2TB |

**特点：**
- 💸 价格昂贵
- 👥 需求较少
- 📦 库存相对充足

---

## ⚙️ 配置示例

### 示例1: 新手保守配置

```json
{
  "region": "HK",
  "target_products": [
    {
      "name": "iPhone 17 Pro Max 深墨蓝色 256GB",
      "part_number": "MFYP4ZA/A",
      "color": "深墨蓝色",
      "storage": "256GB"
    }
  ],
  "target_stores": ["R409"],
  "check_interval": 30,
  "notification_enabled": true,
  "sound_enabled": true
}
```

**特点：**
- 1个产品 × 1个门店 = 1次请求/轮
- 间隔30秒 → 约2次/分钟
- ✅ 极度安全

---

### 示例2: 推荐配置

```json
{
  "region": "HK",
  "target_products": [
    {
      "name": "iPhone 17 Pro Max 深墨蓝色 256GB",
      "part_number": "MFYP4ZA/A",
      "color": "深墨蓝色",
      "storage": "256GB"
    },
    {
      "name": "iPhone 17 Pro Max 宇宙橙色 256GB",
      "part_number": "MFYN4ZA/A",
      "color": "宇宙橙色",
      "storage": "256GB"
    },
    {
      "name": "iPhone 17 Pro Max 银色 256GB",
      "part_number": "MFYM4ZA/A",
      "color": "银色",
      "storage": "256GB"
    }
  ],
  "target_stores": ["R409", "R428", "R485"],
  "check_interval": 30,
  "notification_enabled": true,
  "sound_enabled": true
}
```

**特点：**
- 3个产品 × 3个门店 = 9次请求/轮
- 随机间隔3-6秒，平均40秒/轮
- 30秒check_interval
- 总周期约70秒 → 约8次/分钟
- ✅ 安全可靠

---

## 📊 频率计算公式

```python
# 每轮请求数
total_requests = 产品数 × 门店数

# 请求时间（含随机延迟）
request_time = total_requests × 平均延迟(4.5秒)

# 总周期时间
cycle_time = request_time + check_interval

# 每分钟请求频率
frequency = (total_requests / cycle_time) × 60
```

**示例计算：**

```
3个产品 × 3个门店 = 9次请求
9次 × 4.5秒 = 40.5秒（请求时间）
40.5秒 + 30秒 = 70.5秒（总周期）
(9 / 70.5) × 60 = 7.7次/分钟 ✅
```

---

## 🛡️ 安全建议

### 频率安全等级

| 频率 | 等级 | 建议 |
|------|------|------|
| < 10次/分 | ✅ 安全 | 可以放心使用 |
| 10-15次/分 | ⚠️ 中等 | 密切监控，遇541立即停止 |
| 15-25次/分 | ❌ 高风险 | 不推荐，很可能触发限制 |
| > 25次/分 | 🛑 极高风险 | 几乎必定被限制 |

### 最佳实践

1. **首次使用**
   - ✅ 选择保守或平衡策略
   - ✅ 监控几轮，观察是否触发541
   - ✅ 确认安全后再扩大范围

2. **长期监控**
   - 📊 频率控制在10次/分以内
   - 🔄 定期检查HTTP状态
   - 💡 遇到限制立即停止

3. **应急措施**
   - 🛑 触发541 → 立即停止
   - ⏰ 增加check_interval（60秒+）
   - 📉 减少产品或门店数量
   - 🔄 换VPN节点（如适用）

---

## 🔧 故障排除

### 问题1: 交互式配置失败

**症状：**
```
❌ 交互式配置失败
```

**解决方案：**
```bash
# 检查文件是否存在
ls -la interactive_config_hk.py

# 检查数据文件
ls -la apple_stores_hongkong.json
ls -la iphone17_promax_hongkong_complete.json

# 重新运行
python3 interactive_config_hk.py
```

---

### 问题2: 没有产品数据

**症状：**
```
⚠️ 未找到香港产品数据
```

**解决方案：**
- 确保 `iphone17_promax_hongkong_complete.json` 存在
- 检查文件内容是否正确
- 参考 `快速提取iPhone型号.md` 获取数据

---

### 问题3: 门店响应为0

**症状：**
```
❌ 暂无库存 (已查询 0 个门店)
```

**解决方案：**
- 检查网络连接
- 确认VPN状态（如需要）
- 验证Part Number格式（必须ZA/A结尾）
- 检查门店编号是否正确

---

## 📝 常见问题

### Q1: 香港监控需要VPN吗？

**A:** 不一定，但推荐使用。

- ✅ 有些网络可直接访问
- ⚠️ 部分网络可能被屏蔽
- 💡 VPN可提高稳定性

**测试方法：**
```bash
curl https://www.apple.com/hk-zh/shop/fulfillment-messages
```

---

### Q2: 交互式配置vs预设配置，哪个好？

**A:** 各有优势

**交互式配置：**
- ✅ 灵活定制
- ✅ 实时风险评估
- ✅ 适合深度用户

**预设配置：**
- ✅ 快速启动
- ✅ 经过验证
- ✅ 适合快速上手

**建议：**
- 新手：先用预设配置
- 熟悉后：使用交互式配置

---

### Q3: 可以同时监控多个系列吗？

**A:** 当前版本仅支持iPhone 17 Pro Max

- ❌ 不支持 iPhone 17标准版
- ❌ 不支持 iPhone 17 Pro
- ✅ 仅支持 iPhone 17 Pro Max

**原因：**
- 香港型号数据目前只有Pro Max
- 其他系列数据需要补充

**解决方案：**
- 参考 `快速提取iPhone型号.md`
- 自行获取其他系列Part Number
- 手动添加到配置文件

---

## 🎯 使用流程总结

```
1. 启动程序
   python3 start.py
   ↓
2. 选择区域
   2 (🇭🇰 中国香港)
   ↓
3. 选择配置方案
   1 (交互式配置 ⭐)
   ↓
4. 选择监控策略
   1-保守 / 2-平衡 / 3-积极 / 4-全店 / 5-自定义
   ↓
5. 选择产品
   按提示输入（如: 1,2,3）
   ↓
6. 选择门店
   按提示输入（如: 1,2,3）
   ↓
7. 确认配置
   查看摘要 → 确认(y)
   ↓
8. 开始监控
   实时查看库存状态
```

---

## 📚 相关文档

- [快速提取iPhone型号.md](快速提取iPhone型号.md) - 获取Part Number
- [香港门店_最终确认.md](香港门店_最终确认.md) - 门店验证报告
- [请求策略优化说明.md](请求策略优化说明.md) - 防爬虫规则
- [问题彻底解决报告.md](问题彻底解决报告.md) - 随机打散策略

---

## ✅ 总结

香港区域交互式配置功能特点：

1. **✨ 功能完善**
   - 多种预设策略
   - 智能产品分组
   - 灵活门店选择
   - 自动风险评估

2. **🛡️ 安全可靠**
   - 实时频率计算
   - 风险等级提示
   - 自动优化建议
   - 防爬虫保护

3. **🎨 使用便捷**
   - 清晰的界面提示
   - 智能默认选项
   - 一键生成配置
   - 即开即用

---

**🎉 开始使用香港交互式配置，轻松监控iPhone 17 Pro Max库存！**

```bash
python3 start.py
```

