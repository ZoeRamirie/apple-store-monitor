# ❓ 常见问题解答 (FAQ)

## 🔥 热门问题

### Q1: 在 Network 面板过滤 `pickup-message` 后没有任何内容？

**答：这是正常的！**

#### 原因

Apple 的 API 只有在**特定操作**时才会触发请求，不是打开页面就会自动发送。

#### 正确操作步骤

1. ✅ 打开 Apple 官网：https://www.apple.com.cn/shop/buy-iphone
2. ✅ 选择 iPhone 型号
3. ✅ 选择颜色和容量
4. ✅ **点击页面上的"查看店内提货情况"按钮** ← 关键步骤！
5. ✅ 在弹出的窗口中输入位置（如：北京）
6. ✅ 点击搜索
7. ✅ **这时** Network 面板才会出现请求

#### 快速解决方案 ⭐

**不需要自己获取！直接使用现有的 Part Number：**

```json
{
  "target_products": [
    {
      "name": "iPhone 16 Pro Max 钛原色 256GB",
      "part_number": "MU773CH/A",
      "color": "钛原色",
      "storage": "256GB"
    }
  ],
  "all_stores": true,
  "check_interval": 3
}
```

把这个配置保存到 `config.json`，程序就可以运行了！

---

### Q2: 如何测试程序是否能正常工作？

**答：运行测试脚本**

```bash
cd /Users/kellychen/CodeBuddy/applepick
python3 test_api.py
```

测试脚本会：
- ✅ 自动测试 Apple API
- ✅ 验证 Part Number 是否有效
- ✅ 显示库存查询结果
- ✅ 确认程序是否可用

---

### Q3: Part Number 在哪里可以找到？

**答：三种方法**

#### 方法 1: 使用现成的（推荐）⭐

直接使用 iPhone 16 系列的 Part Number：

| 型号 | Part Number |
|------|-------------|
| iPhone 16 Pro Max 256GB 钛原色 | MU773CH/A |
| iPhone 16 Pro Max 512GB 钛原色 | MU813CH/A |
| iPhone 16 Pro Max 256GB 钛黑色 | MU783CH/A |
| iPhone 16 Pro 128GB 钛原色 | MU6D3CH/A |
| iPhone 16 Pro 256GB 钛原色 | MU6F3CH/A |

更多型号请查看：**`获取Part_Number详细教程.md`**

#### 方法 2: 从官网获取

1. 访问 Apple 官网商品页面
2. 选择配置后，点击"查看店内提货情况"
3. 在 Network 面板查找相关请求
4. 查看 `parts.0` 参数

#### 方法 3: 从 URL 获取

某些情况下，URL 中包含型号编号：
```
https://www.apple.com.cn/.../mu773ch-a
                              ^^^^^^^^
                         这是 Part Number
```

---

### Q4: 如何获取 iPhone 17 的 Part Number？

**答：iPhone 17 系列已于 2025 年 9 月正式发布上市**

**获取 iPhone 17 Part Number 的方法：**
1. ✅ 访问 Apple 官网 iPhone 17 购买页面
2. ✅ 选择您想要的配置（颜色、容量）
3. ✅ 点击"查看店内提货情况"
4. ✅ 输入位置并搜索（这时会触发 API 请求）
5. ✅ 在浏览器 Network 面板查找相关请求
6. ✅ 查看请求参数中的 `parts.0` 字段

**详细教程：** 请查看 `获取Part_Number详细教程.md`

---

### Q5: 如何快速开始使用？

**答：3 步开始**

```bash
# 第 1 步：安装依赖
cd /Users/kellychen/CodeBuddy/applepick
pip3 install -r requirements.txt

# 第 2 步：配置（使用示例配置）
cp config.example.json config.json

# 第 3 步：运行程序
python3 main.py
```

**就这么简单！** 示例配置已经包含可用的 iPhone 16 Pro Max 型号。

---

### Q6: 为什么显示"查询失败"？

**可能原因及解决方法：**

#### 1. 网络连接问题

```bash
# 测试网络
ping apple.com.cn
```

#### 2. Part Number 不正确

使用测试脚本验证：
```bash
python3 test_api.py
```

#### 3. 请求频率过高

增大检查间隔：
```json
{
  "check_interval": 5
}
```

#### 4. Apple API 暂时不可用

等待几分钟后重试。

---

### Q7: 程序会自动下单吗？

**答：不会！**

程序**只监控库存**，不会自动下单。

当检测到有货时：
- 🔔 发送通知提醒你
- 📊 显示有货门店信息
- ❌ **不会**自动下单
- ✅ 你需要手动前往购买

---

### Q8: 可以同时监控多个型号吗？

**答：可以！**

```json
{
  "target_products": [
    {"name": "iPhone 16 Pro Max 256GB", "part_number": "MU773CH/A"},
    {"name": "iPhone 16 Pro Max 512GB", "part_number": "MU813CH/A"},
    {"name": "iPhone 16 Pro 256GB", "part_number": "MU6F3CH/A"}
  ]
}
```

支持同时监控多个型号、颜色、容量。

---

### Q9: 如何只监控本地门店？

**答：配置 target_stores**

```json
{
  "all_stores": false,
  "target_stores": ["R485", "R448"]
}
```

**门店编号速查：**
- 北京三里屯：R485
- 北京王府井：R448
- 上海浦东：R409
- 上海南京东路：R388
- 深圳益田：R505

完整列表查看：`apple_stores_china.json`

---

### Q10: 程序占用资源大吗？

**答：非常小！**

- CPU: < 1%
- 内存: ~50 MB
- 网络: 每次查询 10-50 KB

可以 24 小时后台运行，完全不影响电脑使用。

---

### Q11: 如何后台运行程序？

**答：使用 screen 或 nohup**

#### macOS/Linux:

```bash
# 方法 1: screen
screen -S apple_monitor
python3 main.py
# 按 Ctrl+A 然后 D 分离会话

# 恢复会话
screen -r apple_monitor

# 方法 2: nohup
nohup python3 main.py > output.log 2>&1 &
```

#### Windows:

在任务计划程序中设置开机启动。

详细教程：**`部署指南.md`**

---

### Q12: 没有收到桌面通知？

**答：检查以下几点**

#### macOS:
1. 系统偏好设置 > 通知
2. 允许 Terminal 发送通知

#### Linux:
```bash
# 安装通知支持
sudo apt install libnotify-bin

# 测试
notify-send "测试" "这是测试通知"
```

#### Windows:
- 设置 > 系统 > 通知和操作
- 确保通知功能已开启

#### 重新安装 plyer:
```bash
pip3 uninstall plyer
pip3 install plyer
```

---

### Q13: 检查间隔设置多少合适？

**答：根据场景调整**

| 场景 | 建议间隔 | 说明 |
|------|----------|------|
| 新品首发 | 2-3 秒 | 快速抢购 |
| 日常补货 | 5-10 秒 | 平衡性能 |
| 后台监控 | 15-30 秒 | 低频检查 |

**注意：** 不建议低于 2 秒，可能被限制。

---

### Q14: 如何查看运行日志？

**答：查看日志文件**

```bash
# 实时查看日志
tail -f monitor.log

# 查看全部日志
cat monitor.log

# 查看最近50行
tail -50 monitor.log
```

---

### Q15: 程序突然停止了怎么办？

**答：检查日志和重启**

```bash
# 1. 查看日志找原因
tail -50 monitor.log

# 2. 测试 API 是否正常
python3 test_api.py

# 3. 重新启动
python3 main.py
```

**常见原因：**
- 网络断开
- Apple API 维护
- 电脑休眠
- 请求频率过高被限制

---

## 📚 更多文档

| 文档 | 说明 |
|------|------|
| **快速开始.md** | 5分钟入门指南 |
| **获取Part_Number详细教程.md** | Part Number 获取方法 |
| **使用指南.md** | 完整使用手册 |
| **部署指南.md** | 服务器部署方案 |
| **README.md** | 项目完整说明 |

---

## 🆘 仍然有问题？

1. **查看日志文件** - `monitor.log`
2. **运行测试脚本** - `python3 test_api.py`
3. **检查配置文件** - `config.json`
4. **查看完整文档** - 上述文档列表

---

## 💡 快速小贴士

### 1️⃣ 最快开始使用

```bash
cp config.example.json config.json
python3 main.py
```

示例配置已经可用，直接运行！

### 2️⃣ 测试 API

```bash
python3 test_api.py
```

### 3️⃣ 修改监控商品

编辑 `config.json`，修改 `part_number` 字段。

### 4️⃣ 停止程序

按 `Ctrl+C`

### 5️⃣ 后台运行

```bash
screen -S apple_monitor
python3 main.py
# Ctrl+A, D
```

---

**祝你使用顺利！🍎**

有问题随时查看本文档或其他详细文档。

