# 跨系列产品选择功能说明

## ✅ 功能概述

现在支持在交互式配置中**跨系列选择产品**，可以同时选择多个系列（如iPhone 16 + iPhone 17 Pro Max），然后从合并后的产品列表中选择具体型号。

---

## 🎯 核心特性

### 1. **多系列选择**
- 支持同时选择多个产品系列
- 输入格式：`1,3,5`（用逗号分隔）
- 自动合并所有选中系列的产品

### 2. **iPhone 16 始终可用**
iPhone 16在所有配置方式中都可使用：

| 配置方式 | 可用性 | 说明 |
|---------|-------|------|
| 交互式配置 | ✅ | 自动显示在第一位，青色高亮 |
| 示例配置 | ✅ | `config.example.json` 已包含 |
| 测试配置 | ✅ | `config_test_iphone16.json` |

### 3. **灵活组合**
可以根据需求自由组合：
- 🧪 测试验证：仅选择 iPhone 16
- 🎯 测试+监控：iPhone 16 + iPhone 17 Pro Max
- 📊 全系列监控：iPhone 17 标准版 + Pro + Pro Max

---

## 📋 使用指南

### 启动程序
```bash
python3 start.py
```

### 完整流程示例

```
1️⃣ 选择区域: 1 (中国大陆)
2️⃣ 选择配置: 1 (交互式配置)
3️⃣ 选择策略: 2 (平衡策略)

4️⃣ 选择产品系列:
   ┌───────────────────────────────────────────────┐
   │ 产品系列:                                     │
   │                                               │
   │   1. iPhone 16 标准版（1个型号）- 测试用      │
   │   2. iPhone 16 Plus（1个型号）- 测试用        │
   │   3. iPhone 17 标准版（10个型号）             │
   │   4. iPhone 17 Pro（9个型号）                 │
   │   5. iPhone 17 Pro Max（12个型号）            │
   │                                               │
   │ 💡 提示：可以选择多个系列，用逗号分隔          │
   │                                               │
   │ 请选择系列: 1,3,5                             │
   └───────────────────────────────────────────────┘

5️⃣ 系统自动合并产品:
   ✅ 选中: iPhone 16 标准版 (1个)
   ✅ 选中: iPhone 17 标准版 (10个)
   ✅ 选中: iPhone 17 Pro Max (12个)
   📊 总计: 23个可选型号

6️⃣ 选择具体型号:
   ┌───────────────────────────────────────────────┐
   │ 可选型号:                                     │
   │                                               │
   │   1. iPhone 16 黑色 128GB (MYEV3CH/A)         │
   │   2. iPhone 17 黑色 256GB (MG6W4CH/A)         │
   │   3. iPhone 17 白色 256GB (MG6X4CH/A)         │
   │   ... (共23个型号)                            │
   │   24. 全选                                    │
   │                                               │
   │ 💡 建议最多选择 3 个产品                      │
   │                                               │
   │ 请选择型号: 1,5,10                            │
   └───────────────────────────────────────────────┘

7️⃣ 选择门店: 1,2,3
8️⃣ 确认配置: y
```

---

## 🎯 典型使用场景

### 场景1: 功能测试
```
选择系列: 1 (仅iPhone 16)
用途: 验证监控系统是否正常工作
优点: iPhone 16有库存，能立即看到效果
```

### 场景2: 测试+监控组合
```
选择系列: 1,5 (iPhone 16 + iPhone 17 Pro Max)
用途: 
  - iPhone 16: 测试系统功能（有库存）
  - iPhone 17 Pro Max: 实际监控（无库存，等上市）
优点: 一个配置同时满足测试和监控需求
```

### 场景3: 全系列监控
```
选择系列: 3,4,5 (所有iPhone 17)
用途: 监控iPhone 17所有系列
优点: 覆盖标准版、Pro、Pro Max
```

### 场景4: 特定组合
```
选择系列: 1,2,3 (iPhone 16标准版 + Plus + iPhone 17标准版)
用途: 对比不同系列的库存情况
优点: 灵活定制监控范围
```

---

## 🔍 界面变化对比

### 修改前（仅支持单系列）
```
产品系列:
  1. iPhone 17 标准版（10个型号）
  2. iPhone 17 Pro（9个型号）
  3. iPhone 17 Pro Max（12个型号）

请选择系列 (1-3): 1        ← 只能选1个

可选型号:
  1. iPhone 17 黑色 256GB
  ... (只显示标准版的10个型号)
```

### 修改后（支持多系列）
```
产品系列:
  1. iPhone 16 标准版（1个型号）- 测试用    ← 新增
  2. iPhone 16 Plus（1个型号）- 测试用      ← 新增
  3. iPhone 17 标准版（10个型号）
  4. iPhone 17 Pro（9个型号）
  5. iPhone 17 Pro Max（12个型号）

💡 提示：可以选择多个系列，用逗号分隔（如: 1,3,5）  ← 新增提示

请选择系列 (1-5，多选用逗号分隔): 1,3,5   ← 支持多选

可选型号:
  1. iPhone 16 黑色 128GB
  2. iPhone 17 黑色 256GB
  ... (显示所有选中系列的23个型号)          ← 自动合并
```

---

## ✅ iPhone 16 可用性确认

### 1. 交互式配置（推荐）
- ✅ 自动加载 `iphone17_all_models.json` 中的iPhone 16
- ✅ 显示在系列列表第一位
- ✅ 使用青色高亮，标记"测试用"
- ✅ 支持与任意系列组合

### 2. 示例配置
```bash
# config.example.json 已包含iPhone 16
cat config.example.json
```
```json
{
  "target_products": [
    {
      "name": "iPhone 16 白色 128GB",
      "part_number": "MYEW3CH/A"
    },
    {
      "name": "iPhone 16 PLUS 白色 256GB",
      "part_number": "MXUG3CH/A"
    }
  ]
}
```

### 3. 测试配置
```bash
# 大陆测试配置
cat config_test_iphone16.json

# 香港测试配置
cat config_test_iphone16_hk.json
```

---

## 📊 技术实现

### 修改的文件
- `interactive_config.py`: 添加多系列选择支持
- `iphone17_all_models.json`: 包含iPhone 16数据
- `config.example.json`: 默认包含iPhone 16

### 核心逻辑
```python
# 支持多系列选择
series_input = "1,3,5"  # 用户输入
selected_series = []

# 解析输入
for choice in series_input.split(','):
    choice = choice.strip()
    if choice in series_map:
        selected_series.append(series_map[choice])

# 合并产品
all_products = []
for series_key in selected_series:
    products = PRODUCTS.get(series_key, [])
    all_products.extend(products)

# 用户从合并后的列表中选择具体型号
```

---

## 🎉 总结

现在的交互式配置更加灵活和强大：

1. ✅ **支持跨系列选择** - 可以同时选择多个系列
2. ✅ **iPhone 16始终可用** - 在所有配置方式中都能使用
3. ✅ **灵活组合** - 根据需求自由搭配测试和监控目标
4. ✅ **友好提示** - 清晰的界面引导和操作说明
5. ✅ **自动合并** - 无缝整合多个系列的产品

---

## 🚀 快速开始

```bash
# 启动系统
python3 start.py

# 快速测试
选择: 1 → 1 → 2 → 1 → 1 → 1,2,3 → y

# 组合监控
选择: 1 → 1 → 2 → 1,5 → 具体型号 → 门店 → y
```

---

## 📞 常见问题

**Q: 为什么要加入iPhone 16？**
A: iPhone 16已上市有库存，适合用来测试系统功能是否正常。

**Q: 可以只选iPhone 16吗？**
A: 可以！选择系列时输入`1`即可。

**Q: 可以同时监控3个系列吗？**
A: 可以！输入`3,4,5`即可选择所有iPhone 17系列。

**Q: 选择多个系列后型号太多怎么办？**
A: 可以从合并后的列表中只选择需要的型号，不必全选。

**Q: 示例配置也包含iPhone 16吗？**
A: 是的，`config.example.json`默认包含iPhone 16，可以直接使用。


